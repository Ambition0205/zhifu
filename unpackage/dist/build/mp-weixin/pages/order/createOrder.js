(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/createOrder"],{"02f7":function(e,n,t){"use strict";var o=t("75d1"),a=t.n(o);a.a},"1d35":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,a=t("254f"),i=function(){t.e("components/uni-number-box/uni-number-box").then(function(){return resolve(t("ff7a"))}.bind(null,t)).catch(t.oe)},s={components:{uniNumberBox:i},data:function(){return{maskState:0,desc:"",payType:1,iconsel:"/static/selected.png",iconNosel:"/static/static.png",isCheckState:0,src:"https://fenxiao.99zhifukeji.com/",goodsDetail:{},goodsIndex:[],imgurl:"",number:1,addressData:[],payStype:[{name:"微信支付",image:t("5718"),cont:"快捷安全，支持微信支付",payType:"1"}],order_sn:"",fee:"",id:""}},onLoad:function(n){o=this,console.log(n),o.id=n.id,o.result=e.getStorageSync("RESULT"),a.setHToken(o.result),o.storeDetail(),o.getAddress()},onShow:function(){},methods:{storeDetail:function(){var n={id:o.id};a.storeDetail(n,(function(e){1==e.code&&(o.goodsDetail=e.data,o.goodsIndex=e.data.index[0])}),(function(n){e.hideLoading(),e.showToast({icon:"none",title:n.errmsg})}))},getAddress:function(){a.getDefaultAddress((function(n){1==n.code?o.addressData=n.data:e.showToast({icon:"none",title:n.msg})}),(function(n){e.hideLoading(),e.showToast({icon:"none",title:n.errmsg})}))},numberChange:function(e){this.number=e.number},changePayType:function(e){this.payType=e},stopPrevent:function(){},zhifuChange:function(e){this.isCheckState=e},bindChange:function(e){this.number=e},submit:function(){var n={goodsId:o.id,receiver:o.addressData.receiver,phone:o.addressData.receive_tel,goods_num:o.number,address:o.addressData.province+o.addressData.city+o.addressData.district,unit_price:o.goodsDetail.marketPrice,total:o.goodsDetail.marketPrice*o.number,pay_type:o.isCheckState,remark:o.desc};console.log(n),a.storeSetOrder(n,(function(n){1==n.code&&(o.order_sn=n.data.order_sn,console.log(o.order_sn),console.log(o.isCheckState),0==o.isCheckState&&e.login({provider:"weixin",success:function(n){var t=n.code;console.log("code",t),console.log("order_sn",o.order_sn),e.request({url:"https://fenxiao.99zhifukeji.com/api/store/pay",data:{code:t,order_sn:o.order_sn},header:{"custom-header":"application/json",token:o.result},success:function(n){console.log(n),e.requestPayment({provider:"wxpay",timeStamp:n.data.data.timeStamp,nonceStr:n.data.data.nonceStr,package:n.data.data.package,signType:"MD5",paySign:n.data.data.sign,success:function(n){console.log(n),e.showToast({icon:"none",title:n.msg}),setTimeout((function(){e.redirectTo({url:"/pages/order/paySuc"})}),1e3),console.log("success:"+JSON.stringify(n))},fail:function(e){console.log("fail:"+JSON.stringify(e))}})}})}}))}),(function(n){e.hideLoading(),e.showToast({icon:"none",title:n.errmsg})}))}}};n.default=s}).call(this,t("543d")["default"])},"5edb":function(e,n,t){"use strict";t.r(n);var o=t("1d35"),a=t.n(o);for(var i in o)"default"!==i&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=a.a},"75d1":function(e,n,t){},"9ff8":function(e,n,t){"use strict";(function(e){t("e2f8");o(t("66fd"));var n=o(t("c819"));function o(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("543d")["createPage"])},c819:function(e,n,t){"use strict";t.r(n);var o=t("cb26"),a=t("5edb");for(var i in a)"default"!==i&&function(e){t.d(n,e,(function(){return a[e]}))}(i);t("02f7");var s,r=t("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);n["default"]=c.exports},cb26:function(e,n,t){"use strict";var o={uniNumberBox:function(){return t.e("components/uni-number-box/uni-number-box").then(t.bind(null,"ff7a"))}},a=function(){var e=this,n=e.$createElement;e._self._c},i=[];t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return i})),t.d(n,"a",(function(){return o}))}},[["9ff8","common/runtime","common/vendor"]]]);